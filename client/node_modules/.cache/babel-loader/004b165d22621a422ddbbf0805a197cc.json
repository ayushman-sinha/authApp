{"ast":null,"code":"import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n  setProtectedHeader(protectedHeader) {\n    this._protectedHeader = protectedHeader;\n    return this;\n  }\n\n  async sign(key, options) {\n    var _a;\n\n    const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n    sig.setProtectedHeader(this._protectedHeader);\n\n    if (Array.isArray((_a = this._protectedHeader) === null || _a === void 0 ? void 0 : _a.crit) && this._protectedHeader.crit.includes('b64') && this._protectedHeader.b64 === false) {\n      throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n    }\n\n    return sig.sign(key, options);\n  }\n\n}","map":{"version":3,"names":["CompactSign","JWTInvalid","encoder","ProduceJWT","SignJWT","setProtectedHeader","protectedHeader","_protectedHeader","sign","key","options","_a","sig","encode","JSON","stringify","_payload","Array","isArray","crit","includes","b64"],"sources":["D:/React/authApp/client/node_modules/jose/dist/browser/jwt/sign.js"],"sourcesContent":["import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        var _a;\n        const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n        sig.setProtectedHeader(this._protectedHeader);\n        if (Array.isArray((_a = this._protectedHeader) === null || _a === void 0 ? void 0 : _a.crit) &&\n            this._protectedHeader.crit.includes('b64') &&\n            this._protectedHeader.b64 === false) {\n            throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n        }\n        return sig.sign(key, options);\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,wBAA5B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,MAAMC,OAAN,SAAsBD,UAAtB,CAAiC;EACpCE,kBAAkB,CAACC,eAAD,EAAkB;IAChC,KAAKC,gBAAL,GAAwBD,eAAxB;IACA,OAAO,IAAP;EACH;;EACS,MAAJE,IAAI,CAACC,GAAD,EAAMC,OAAN,EAAe;IACrB,IAAIC,EAAJ;;IACA,MAAMC,GAAG,GAAG,IAAIZ,WAAJ,CAAgBE,OAAO,CAACW,MAAR,CAAeC,IAAI,CAACC,SAAL,CAAe,KAAKC,QAApB,CAAf,CAAhB,CAAZ;IACAJ,GAAG,CAACP,kBAAJ,CAAuB,KAAKE,gBAA5B;;IACA,IAAIU,KAAK,CAACC,OAAN,CAAc,CAACP,EAAE,GAAG,KAAKJ,gBAAX,MAAiC,IAAjC,IAAyCI,EAAE,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,EAAE,CAACQ,IAAnF,KACA,KAAKZ,gBAAL,CAAsBY,IAAtB,CAA2BC,QAA3B,CAAoC,KAApC,CADA,IAEA,KAAKb,gBAAL,CAAsBc,GAAtB,KAA8B,KAFlC,EAEyC;MACrC,MAAM,IAAIpB,UAAJ,CAAe,qCAAf,CAAN;IACH;;IACD,OAAOW,GAAG,CAACJ,IAAJ,CAASC,GAAT,EAAcC,OAAd,CAAP;EACH;;AAfmC"},"metadata":{},"sourceType":"module"}